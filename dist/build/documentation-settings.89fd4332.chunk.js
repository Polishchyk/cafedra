"use strict";(self.webpackChunkcafedra=self.webpackChunkcafedra||[]).push([[8503],{73972:(R,c,e)=>{e.d(c,{f:()=>D});var t=e(45485),a=e(17741),_=e(40464),f=e(52809),h=e(35326);const D=()=>{const o=(0,a.lm)(),{del:M,post:O,put:p,get:A}=(0,a.kY)(),{formatAPIError:P}=(0,a.So)(),{isLoading:s,isError:n,data:i,refetch:d,error:r}=(0,_.useQuery)(["get-documentation",f.Z],async()=>{const{data:E}=await A(`/${f.Z}/getInfos`);return E});(0,t.useEffect)(()=>{n&&r&&o({type:"warning",message:r?P(r):{id:"notification.error"}})},[n,r,o,P]);const l=E=>{o({type:"warning",message:P(E)})},m=(E,u,T)=>{d(),o({type:E,message:{id:(0,h.Z)(u),defaultMessage:T}})},L=(0,_.useMutation)(({prefix:E,version:u})=>M(`${E}/deleteDoc/${u}`),{onSuccess:()=>m("info","notification.delete.success","Successfully deleted documentation"),onError:l}),v=(0,_.useMutation)(({prefix:E,body:u})=>p(`${E}/updateSettings`,u),{onSuccess:()=>m("success","notification.update.success","Successfully updated settings"),onError:l}),x=(0,_.useMutation)(({prefix:E,version:u})=>O(`${E}/regenerateDoc`,{version:u}),{onSuccess:()=>m("info","notification.generate.success","Successfully generated documentation"),onError:l});return{data:i,isLoading:s,isError:n,remove:L,submit:v,regenerate:x}}},50233:(R,c,e)=>{e.r(c),e.d(c,{default:()=>Z});var t=e(45485),a=e(9941),_=e(27875),f=e(48102),h=e(74758),D=e(93415),o=e(10701),M=e(32370),O=e(23298),p=e(74577),A=e(2548),P=e(12881),s=e(28040),n=e(17741),i=e(59082),d=e(98264),r=e(92191),l=e(71563),m=e(61020),L=e(72450),v=e(47853),x=e(12966),E=e(73972),u=e(10104);const T=v.Ry().shape({restrictedAccess:v.O7(),password:v.Z_().when("restrictedAccess",(g,C)=>g?C.required(n.I0.required):C)}),S=()=>{(0,n.go)();const{formatMessage:g}=(0,m.Z)(),{submit:C,data:W,isLoading:$}=(0,E.f)(),[I,w]=(0,t.useState)(!1),{allowedActions:z}=(0,n.ss)(x._),b=y=>{C.mutate({prefix:W?.prefix,body:y})};return t.createElement(a.o,null,$?t.createElement(n.dO,null,"Plugin settings are loading"):t.createElement(l.J9,{initialValues:{restrictedAccess:W?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:b,validationSchema:T},({handleSubmit:y,values:B,handleChange:H,errors:U,setFieldTouched:F,setFieldValue:K,dirty:V})=>t.createElement(n.l0,{noValidate:!0,onSubmit:y},t.createElement(_.T,{title:g({id:(0,u.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:g({id:(0,u.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:t.createElement(f.z,{type:"submit",startIcon:t.createElement(i.Z,null),disabled:!V&&z.canUpdate},g({id:(0,u.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"}))}),t.createElement(h.D,null,t.createElement(D.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(o.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(M.Z,{variant:"delta",as:"h2"},g({id:"global.settings",defaultMessage:"Settings"})),t.createElement(O.r,{gap:4},t.createElement(p.P,{col:6,s:12},t.createElement(A.s,{name:"restrictedAccess",label:g({id:(0,u.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:g({id:(0,u.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:B.restrictedAccess,onChange:()=>{B.restrictedAccess===!0&&(K("password","",!1),F("password",!1,!1)),K("restrictedAccess",!B.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),B.restrictedAccess&&t.createElement(p.P,{col:6,s:12},t.createElement(P.o,{label:g({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:I?"text":"password",value:B.password,onChange:H,error:U.password?g({id:U.password,defaultMessage:"Invalid value"}):null,endAction:t.createElement(j,{onClick:N=>{N.stopPropagation(),w(X=>!X)},label:g(I?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},I?t.createElement(d.Z,null):t.createElement(r.Z,null))})))))))))},j=(0,L.default)(s.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:g})=>g.colors.neutral600};
    }
  }
`,Z=S},35326:(R,c,e)=>{e.d(c,{Z:()=>_});var t=e(52809);const _=f=>`${t.Z}.${f}`},10104:(R,c,e)=>{e.d(c,{O:()=>t.Z});var t=e(35326)},74758:(R,c,e)=>{e.d(c,{D:()=>_});var t=e(74081),a=e(93415);const _=({children:f})=>(0,t.jsx)(a.x,{paddingLeft:10,paddingRight:10,children:f})},27875:(R,c,e)=>{e.d(c,{T:()=>p});var t=e(74081),a=e(45485),_=e(72450);const f=s=>{const n=(0,a.useRef)(null),[i,d]=(0,a.useState)(!0),r=([l])=>{d(l.isIntersecting)};return(0,a.useEffect)(()=>{const l=n.current,m=new IntersectionObserver(r,s);return l&&m.observe(n.current),()=>{l&&m.disconnect()}},[n,s]),[n,i]};var h=e(66705);const D=(s,n)=>{const i=(0,h.W)(n);(0,a.useLayoutEffect)(()=>{const d=new ResizeObserver(i);return Array.isArray(s)?s.forEach(r=>{r.current&&d.observe(r.current)}):s.current&&d.observe(s.current),()=>{d.disconnect()}},[s,i])};var o=e(93415),M=e(10701),O=e(32370);const p=s=>{const n=(0,a.useRef)(null),[i,d]=(0,a.useState)(null),[r,l]=f({root:null,rootMargin:"0px",threshold:0});return D(r,()=>{r.current&&d(r.current.getBoundingClientRect())}),(0,a.useEffect)(()=>{n.current&&d(n.current.getBoundingClientRect())},[n]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{height:i?.height},ref:r,children:l&&(0,t.jsx)(P,{ref:n,...s})}),!l&&(0,t.jsx)(P,{...s,sticky:!0,width:i?.width})]})};p.displayName="HeaderLayout";const A=(0,_.default)(o.x)`
  width: ${({width:s})=>s?`${s/16}rem`:void 0};
  z-index: ${({theme:s})=>s.zIndices[1]};
`,P=a.forwardRef(({navigationAction:s,primaryAction:n,secondaryAction:i,subtitle:d,title:r,sticky:l,width:m,...L},v)=>{const x=typeof d=="string";return l?(0,t.jsx)(A,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:m,"data-strapi-header-sticky":!0,children:(0,t.jsxs)(M.k,{justifyContent:"space-between",children:[(0,t.jsxs)(M.k,{children:[s&&(0,t.jsx)(o.x,{paddingRight:3,children:s}),(0,t.jsxs)(o.x,{children:[(0,t.jsx)(O.Z,{variant:"beta",as:"h1",...L,children:r}),x?(0,t.jsx)(O.Z,{variant:"pi",textColor:"neutral600",children:d}):d]}),i?(0,t.jsx)(o.x,{paddingLeft:4,children:i}):null]}),(0,t.jsx)(M.k,{children:n?(0,t.jsx)(o.x,{paddingLeft:2,children:n}):void 0})]})}):(0,t.jsxs)(o.x,{ref:v,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:s?6:8,background:"neutral100","data-strapi-header":!0,children:[s?(0,t.jsx)(o.x,{paddingBottom:2,children:s}):null,(0,t.jsxs)(M.k,{justifyContent:"space-between",children:[(0,t.jsxs)(M.k,{minWidth:0,children:[(0,t.jsx)(O.Z,{as:"h1",variant:"alpha",...L,children:r}),i?(0,t.jsx)(o.x,{paddingLeft:4,children:i}):null]}),n]}),x?(0,t.jsx)(O.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:d}):d]})})},9941:(R,c,e)=>{e.d(c,{o:()=>h});var t=e(74081),a=e(72450),_=e(93415);const f=(0,a.default)(_.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,h=({labelledBy:D="main-content-title",...o})=>(0,t.jsx)(f,{"aria-labelledby":D,as:"main",id:"main-content",tabIndex:-1,...o})}}]);
