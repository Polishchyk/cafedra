(self.webpackChunkcafedra=self.webpackChunkcafedra||[]).push([[8853],{26302:(P,R,t)=>{"use strict";t.r(R),t.d(R,{default:()=>Lt});var e=t(45485),n=t(17741),a=t(51447),r=t(84419),c=t(9941),m=t(27875),o=t(48102),p=t(74758),g=t(10701),d=t(32370),D=t(23298),E=t(74577),l=t(12881),u=t(39708),C=t(59082),y=t(71563),h=t(61020),B=t(40464),S=t(70627),L=t.n(S);const k=(0,e.createContext)({}),I=({children:s,value:i})=>e.createElement(k.Provider,{value:i},s),F=()=>(0,e.useContext)(k);I.propTypes={children:L().node.isRequired,value:L().object.isRequired};var U=t(58655),J=t(45322),H=t(24920),ce=t(34642),ne=t(51943),de=t.n(ne);function Y(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return de()(s.replace("api::","").replace("plugin::",""))}}const se=Y,fe=(s,i)=>{const f=Object.keys(i).sort().map(v=>({name:v,isOpen:!1}));return{...s,collapses:f}};var z=t(93415),ue=t(51006),re=t.n(ue),q=t(22572),_=t(10989),ae=t(35318),Be=t(98934),oe=t.n(Be),ee=t(72450);const Ee=(0,ee.css)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,be=(0,ee.default)(z.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&Ee}
  &:hover {
    ${Ee}
  }
`,Se=ee.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,ve=({subCategory:s})=>{const{formatMessage:i}=(0,h.Z)(),{onChange:f,onChangeSelectAll:v,onSelectedAction:T,selectedAction:x,modifiedData:A}=F(),j=(0,e.useMemo)(()=>oe()(A,s.name,{}),[A,s]),O=(0,e.useMemo)(()=>Object.values(j).every(M=>M.enabled===!0),[j]),b=(0,e.useMemo)(()=>Object.values(j).some(M=>M.enabled===!0)&&!O,[j,O]),$=(0,e.useCallback)(({target:{name:M}})=>{v({target:{name:M,value:!O}})},[O,v]),Z=(0,e.useCallback)(M=>x===M,[x]);return e.createElement(z.x,null,e.createElement(g.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(z.x,{paddingRight:4},e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},s.label)),e.createElement(Se,null),e.createElement(z.x,{paddingLeft:4},e.createElement(q.X,{name:s.name,value:O,onValueChange:M=>$({target:{name:s.name,value:M}}),indeterminate:b},i({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(g.k,{paddingTop:6,paddingBottom:6},e.createElement(D.r,{gap:2,style:{flex:1}},s.actions.map(M=>{const W=`${M.name}.enabled`;return e.createElement(E.P,{col:6,key:M.name},e.createElement(be,{isActive:Z(M.name),padding:2,hasRadius:!0},e.createElement(q.X,{value:oe()(A,W,!1),name:W,onValueChange:N=>f({target:{name:W,value:N}})},M.label),e.createElement("button",{type:"button",onClick:()=>T(M.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(_.T,{as:"span"},i({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:M.name})),e.createElement(ae.Z,null))))}))))};ve.propTypes={subCategory:L().object.isRequired};const $e=ve,ye=({name:s,permissions:i})=>{const f=(0,e.useMemo)(()=>re()(Object.values(i.controllers).reduce((v,T,x)=>{const A=`${s}.controllers.${Object.keys(i.controllers)[x]}`,j=re()(Object.keys(T).reduce((O,b)=>[...O,{...T[b],label:b,name:`${A}.${b}`}],[]),"label");return[...v,{actions:j,label:Object.keys(i.controllers)[x],name:A}]},[]),"label"),[s,i]);return e.createElement(z.x,{padding:6},f.map(v=>e.createElement($e,{key:v.name,subCategory:v})))};ye.propTypes={name:L().string.isRequired,permissions:L().object.isRequired};const Ie=ye;var xe=t(61815);const Ze={collapses:[]},Ue=(s,i)=>(0,xe.ZP)(s,f=>{switch(i.type){case"TOGGLE_COLLAPSE":{f.collapses=s.collapses.map((v,T)=>T===i.index?{...v,isOpen:!v.isOpen}:{...v,isOpen:!1});break}default:return f}}),We=()=>{const{modifiedData:s}=F(),{formatMessage:i}=(0,h.Z)(),[{collapses:f},v]=(0,e.useReducer)(Ue,Ze,x=>fe(x,s)),T=x=>v({type:"TOGGLE_COLLAPSE",index:x});return e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:1},f.map((x,A)=>e.createElement(J.U,{expanded:x.isOpen,onToggle:()=>T(A),key:x.name,variant:A%2===0?"secondary":void 0},e.createElement(H.B,{title:se(x.name),description:i({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:x.name}),variant:A%2?"primary":"secondary"}),e.createElement(ce.v,null,e.createElement(Ie,{permissions:s[x.name],name:x.name})))))};var Ke=t(10124),ke=t.n(Ke),Ne=t(87366),Fe=t.n(Ne),ze=t(58422),Ge=t.n(ze),He=t(34049),Ve=t.n(He);const Qe=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Ye=(0,ee.default)(z.x)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function me({route:s}){const{formatMessage:i}=(0,h.Z)(),{method:f,handler:v,path:T}=s,x=T?Ve()(T.split("/")):[],[A="",j=""]=v?v.split("."):[],O=Qe(s.method);return e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(d.Z,{variant:"delta",as:"h3"},i({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,A),e.createElement(d.Z,{variant:"delta",textColor:"primary600"},".",j)),e.createElement(g.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(Ye,{background:O.background,borderColor:O.border,padding:2},e.createElement(d.Z,{fontWeight:"bold",textColor:O.text},f)),e.createElement(z.x,{paddingLeft:2,paddingRight:2},Ge()(x,b=>e.createElement(d.Z,{key:b,textColor:b.includes(":")?"neutral600":"neutral900"},"/",b)))))}me.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},me.propTypes={route:L().shape({handler:L().string,method:L().string,path:L().string})};const Xe=me,we=()=>{const{formatMessage:s}=(0,h.Z)(),{selectedAction:i,routes:f}=F(),v=Fe()(i.split("."),"controllers"),T=oe()(f,v[0]),x=v.slice(1).join("."),A=ke()(T)?[]:T.filter(j=>j.handler.endsWith(x));return e.createElement(E.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},i?e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},A.map((j,O)=>e.createElement(Xe,{key:O,route:j}))):e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(d.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(d.Z,{as:"p",textColor:"neutral600"},s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))},Je=(s,i,f)=>({...s,initialData:i,modifiedData:i,routes:f});var qe=t(43433),Ce=t.n(qe),_e=t(41942),et=t.n(_e);const tt={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},nt=(s,i)=>(0,xe.ZP)(s,f=>{switch(i.type){case"ON_CHANGE":{const v=i.keys.length,T=i.keys[v-1]==="enabled";if(i.value&&T){const x=et()(i.keys,v-1).join(".");f.selectedAction=x}Ce()(f,["modifiedData",...i.keys],i.value);break}case"ON_CHANGE_SELECT_ALL":{const v=["modifiedData",...i.keys],T=oe()(s,v,{}),x=Object.keys(T).reduce((A,j)=>(A[j]={...T[j],enabled:i.value},A),{});Ce()(f,v,x);break}case"ON_RESET":{f.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{f.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:v}=i;f.selectedAction=v===s.selectedAction?"":v;break}default:return f}}),Me=(0,e.forwardRef)(({permissions:s,routes:i},f)=>{const{formatMessage:v}=(0,h.Z)(),[T,x]=(0,e.useReducer)(nt,tt,$=>Je($,s,i));(0,e.useImperativeHandle)(f,()=>({getPermissions(){return{permissions:T.modifiedData}},resetForm(){x({type:"ON_RESET"})},setFormAfterSubmit(){x({type:"ON_SUBMIT_SUCCEEDED"})}}));const b={...T,onChange:({target:{name:$,value:Z}})=>x({type:"ON_CHANGE",keys:$.split("."),value:Z==="empty__string_value"?"":Z}),onChangeSelectAll:({target:{name:$,value:Z}})=>x({type:"ON_CHANGE_SELECT_ALL",keys:$.split("."),value:Z}),onSelectedAction:$=>x({type:"SELECT_ACTION",actionToSelect:$})};return e.createElement(I,{value:b},e.createElement(D.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(E.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(d.Z,{variant:"delta",as:"h2"},v({id:(0,U.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(d.Z,{as:"p",textColor:"neutral600"},v({id:(0,U.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(We,null))),e.createElement(we,null)))});Me.propTypes={permissions:L().object.isRequired,routes:L().object.isRequired};const Re=(0,e.memo)(Me);var ge=t(47853);const Pe=ge.Ry().shape({name:ge.Z_().required(n.I0.required),description:ge.Z_().required(n.I0.required)});var te=t(99688);const Le=()=>{const s=(0,n.lm)(),{get:i}=(0,n.kY)(),{formatAPIError:f}=(0,n.So)(te.OB),[{data:v,isLoading:T,error:x,refetch:A},{data:j,isLoading:O,error:b,refetch:$}]=(0,B.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:W}}=await i("/users-permissions/permissions");return W}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:W}}=await i("/users-permissions/routes");return W}}]),Z=async()=>{await Promise.all([A(),$()])};(0,e.useEffect)(()=>{x&&s({type:"warning",message:f(x)})},[s,x,f]),(0,e.useEffect)(()=>{b&&s({type:"warning",message:f(b)})},[s,b,f]);const M=T||O;return{permissions:v?(0,te.YX)(v):{},routes:j??{},getData:Z,isLoading:M}},st=()=>{const{formatMessage:s}=(0,h.Z)(),i=(0,n.lm)(),{goBack:f}=(0,a.k6)(),{lockApp:v,unlockApp:T}=(0,n.o1)(),{isLoading:x,permissions:A,routes:j}=Le(),{trackUsage:O}=(0,n.rS)(),b=e.useRef(),{post:$}=(0,n.kY)(),Z=(0,B.useMutation)(W=>$("/users-permissions/roles",W),{onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){O("didCreateRole"),i({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),f()}}),M=async W=>{v();const N=b.current.getPermissions();await Z.mutate({...W,...N,users:[]}),T()};return e.createElement(c.o,null,e.createElement(n.SL,{name:"Roles"}),e.createElement(y.J9,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:M,validationSchema:Pe},({handleSubmit:W,values:N,handleChange:X,errors:K})=>e.createElement(n.l0,{noValidate:!0,onSubmit:W},e.createElement(m.T,{primaryAction:!x&&e.createElement(o.z,{type:"submit",loading:Z.isLoading,startIcon:e.createElement(C.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(p.D,null,e.createElement(g.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(g.k,{direction:"column",alignItems:"stretch"},e.createElement(d.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(D.r,{gap:4},e.createElement(E.P,{col:6},e.createElement(l.o,{name:"name",value:N.name||"",onChange:X,label:s({id:"global.name",defaultMessage:"Name"}),error:K?.name?s({id:K.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(E.P,{col:6},e.createElement(u.g,{id:"description",value:N.description||"",onChange:X,label:s({id:"global.description",defaultMessage:"Description"}),error:K?.description?s({id:K.description,defaultMessage:"Description is required"}):!1,required:!0})))),!x&&e.createElement(Re,{ref:b,permissions:A,routes:j}))))))},rt=()=>e.createElement(n.O4,{permissions:r._.createRole},e.createElement(st,null));var at=t(76827);const ot=()=>{const{formatMessage:s}=(0,h.Z)(),i=(0,n.lm)(),{lockApp:f,unlockApp:v}=(0,n.o1)(),{params:{id:T}}=(0,a.$B)("/settings/users-permissions/roles/:id"),{get:x}=(0,n.kY)(),{isLoading:A,routes:j}=Le(),{data:O,isLoading:b,refetch:$}=(0,B.useQuery)(["users-permissions","role",T],async()=>{const{data:{role:K}}=await x(`/users-permissions/roles/${T}`);return K}),Z=e.useRef(),{put:M}=(0,n.kY)(),{formatAPIError:W}=(0,n.So)(),N=(0,B.useMutation)(K=>M(`/users-permissions/roles/${T}`,K),{onError(K){i({type:"warning",message:W(K)})},async onSuccess(){i({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role edited"}}),await $()}}),X=async K=>{f();const V=Z.current.getPermissions();await N.mutate({...K,...V,users:[]}),v()};return b?e.createElement(n.dO,null):e.createElement(c.o,null,e.createElement(n.SL,{name:"Roles"}),e.createElement(y.J9,{enableReinitialize:!0,initialValues:{name:O.name,description:O.description},onSubmit:X,validationSchema:Pe},({handleSubmit:K,values:V,handleChange:ie,errors:w})=>e.createElement(n.l0,{noValidate:!0,onSubmit:K},e.createElement(m.T,{primaryAction:!A&&e.createElement(o.z,{disabled:O.code==="strapi-super-admin",type:"submit",loading:N.isLoading,startIcon:e.createElement(C.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:O.name,subtitle:O.description,navigationAction:e.createElement(n.rU,{startIcon:e.createElement(at.Z,null),to:"/settings/users-permissions/roles"},s({id:"global.back",defaultMessage:"Back"}))}),e.createElement(p.D,null,e.createElement(g.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(g.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(d.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(D.r,{gap:4},e.createElement(E.P,{col:6},e.createElement(l.o,{name:"name",value:V.name||"",onChange:ie,label:s({id:"global.name",defaultMessage:"Name"}),error:w?.name?s({id:w.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(E.P,{col:6},e.createElement(u.g,{id:"description",value:V.description||"",onChange:ie,label:s({id:"global.description",defaultMessage:"Description"}),error:w?.description?s({id:w.description,defaultMessage:"Description is required"}):!1,required:!0})))),!A&&e.createElement(Re,{ref:Z,permissions:O.permissions,routes:j}))))))},it=()=>e.createElement(n.O4,{permissions:r._.updateRole},e.createElement(ot,null));var lt=t(51926),ct=t(27997),dt=t(37472),ut=t(70774),mt=t(38101),De=t(93153),G=t(50086),gt=t(36938),pt=t(68412),ht=t(86967),ft=t(4987),Et=t(26784),vt=t(78665);const yt=(0,ee.default)(pt.r)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:s})=>`${s.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:s})=>s.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:s})=>s.colors.neutral800};
      }
    }
  }
`,pe=({sortedRoles:s,canDelete:i,permissions:f,setRoleToDelete:v,onDelete:T})=>{const{formatMessage:x}=(0,h.Z)(),{push:A}=(0,a.k6)(),[j,O]=T,b=M=>i&&!["public","authenticated"].includes(M.type),$=M=>{v(M),O(!j)},Z=M=>{A(`/settings/users-permissions/roles/${M}`)};return e.createElement(ht.p,null,s?.map(M=>e.createElement(De.Tr,{key:M.name,...(0,n.X7)({fn:()=>Z(M.id)})},e.createElement(G.Td,{width:"20%"},e.createElement(d.Z,null,M.name)),e.createElement(G.Td,{width:"50%"},e.createElement(d.Z,null,M.description)),e.createElement(G.Td,{width:"30%"},e.createElement(d.Z,null,x({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:M.nb_users}))),e.createElement(G.Td,null,e.createElement(g.k,{justifyContent:"end",...n.UW},e.createElement(n.jW,{permissions:f.updateRole},e.createElement(yt,{to:`/settings/users-permissions/roles/${M.id}`,"aria-label":x({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${M.name}`})},e.createElement(Et.Z,null))),b(M)&&e.createElement(n.jW,{permissions:f.deleteRole},e.createElement(ft.h,{onClick:()=>$(M.id),noBorder:!0,icon:e.createElement(vt.Z,null),label:x({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${M.name}`})})))))))},xt=pe;pe.defaultProps={canDelete:!1},pe.propTypes={onDelete:L().array.isRequired,permissions:L().object.isRequired,setRoleToDelete:L().func.isRequired,sortedRoles:L().array.isRequired,canDelete:L().bool};const Ct=async(s,i)=>{try{const{get:f}=(0,n.tg)(),{data:v}=await f("/users-permissions/roles");return i("The roles have loaded successfully"),v}catch(f){throw s({type:"warning",message:{id:"notification.error"}}),new Error(f)}},Mt=async(s,i)=>{try{const{del:f}=(0,n.tg)();await f(`/users-permissions/roles/${s}`)}catch{i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},Rt=()=>{const{trackUsage:s}=(0,n.rS)(),{formatMessage:i,locale:f}=(0,h.Z)(),v=(0,n.lm)(),{notifyStatus:T}=(0,lt.G)(),[{query:x}]=(0,n.Kx)(),A=x?._q||"",[j,O]=(0,e.useState)(!1),[b,$]=(0,e.useState)(!1),[Z,M]=(0,e.useState)();(0,n.go)();const{isLoading:W,allowedActions:{canRead:N,canDelete:X}}=(0,n.ss)({create:r._.createRole,read:r._.readRoles,update:r._.updateRole,delete:r._.deleteRole}),{isLoading:K,data:{roles:V},isFetching:ie,refetch:w}=(0,B.useQuery)("get-roles",()=>Ct(v,T),{initialData:{},enabled:N}),{includes:Te}=(0,n.L0)(f,{sensitivity:"base"}),Ae=(0,n.Xe)(f,{sensitivity:"base"}),Oe=K||ie,Dt=()=>{O(!j)},Tt={roles:{id:(0,te.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,te.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},At=i({id:"global.roles",defaultMessage:"Roles"}),Ot=(0,B.useMutation)(Q=>Mt(Q,v),{async onSuccess(){await w()}}),jt=async()=>{$(!0),await Ot.mutateAsync(Z),O(!j),$(!1)},le=(V||[]).filter(Q=>Te(Q.name,A)||Te(Q.description,A)).sort((Q,je)=>Ae.compare(Q.name,je.name)||Ae.compare(Q.description,je.description)),Bt=A&&!le.length?"search":"roles",bt=4,St=(V?.length||0)+1;return e.createElement(ct.A,null,e.createElement(n.SL,{name:At}),e.createElement(c.o,{"aria-busy":Oe},e.createElement(m.T,{title:i({id:"global.roles",defaultMessage:"Roles"}),subtitle:i({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(n.jW,{permissions:r._.createRole},e.createElement(n.Qj,{to:"/settings/users-permissions/roles/new",onClick:()=>s("willCreateRole"),startIcon:e.createElement(gt.Z,null),size:"S"},i({id:(0,te.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(dt.Z,{startActions:e.createElement(n.m,{label:i({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(p.D,null,!N&&e.createElement(n.ZF,null),(Oe||W)&&e.createElement(n.dO,null),N&&le&&le?.length?e.createElement(ut.i,{colCount:bt,rowCount:St},e.createElement(mt.h,null,e.createElement(De.Tr,null,e.createElement(G.Th,null,e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},i({id:"global.name",defaultMessage:"Name"}))),e.createElement(G.Th,null,e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},i({id:"global.description",defaultMessage:"Description"}))),e.createElement(G.Th,null,e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},i({id:"global.users",defaultMessage:"Users"}))),e.createElement(G.Th,null,e.createElement(_.T,null,i({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(xt,{sortedRoles:le,canDelete:X,permissions:r._,setRoleToDelete:M,onDelete:[j,O]})):e.createElement(n.x7,{content:Tt[Bt]})),e.createElement(n.QH,{isConfirmButtonLoading:b,onConfirm:jt,onToggleDialog:Dt,isOpen:j})))},Pt=()=>e.createElement(n.O4,{permissions:r._.accessRoles},e.createElement(Rt,null)),Lt=()=>e.createElement(n.O4,{permissions:r._.accessRoles},e.createElement(a.rs,null,e.createElement(a.AW,{path:"/settings/users-permissions/roles/new",component:rt,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles/:id",component:it,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles",component:Pt,exact:!0}),e.createElement(a.AW,{path:"",component:n.Hn})))},99688:(P,R,t)=>{"use strict";t.d(R,{YX:()=>r,OB:()=>c.Z});var e=t(10124),n=t.n(e);const r=m=>Object.keys(m).reduce((o,p)=>{const g=m[p].controllers,d=Object.keys(g).reduce((D,E)=>(n()(g[E])||(D[E]=g[E]),D),{});return n()(d)||(o[p]={controllers:d}),o},{});var c=t(58655)},19975:(P,R,t)=>{var e=t(44936),n=t(67083),a=t(65286),r=t(36393),c=t(20435),m=t(42435),o=200;function p(g,d,D,E){var l=-1,u=n,C=!0,y=g.length,h=[],B=d.length;if(!y)return h;D&&(d=r(d,c(D))),E?(u=a,C=!1):d.length>=o&&(u=m,C=!1,d=new e(d));e:for(;++l<y;){var S=g[l],L=D==null?S:D(S);if(S=E||S!==0?S:0,C&&L===L){for(var k=B;k--;)if(d[k]===L)continue e;h.push(S)}else u(d,L,E)||h.push(S)}return h}P.exports=p},1107:(P,R,t)=>{var e=t(84856),n=t(52593),a=n(e);P.exports=a},92403:(P,R,t)=>{var e=t(1107),n=t(47727);function a(r,c){var m=-1,o=n(r)?Array(r.length):[];return e(r,function(p,g,d){o[++m]=c(p,g,d)}),o}P.exports=a},16429:(P,R,t)=>{var e=t(36393),n=t(82393),a=t(90040),r=t(92403),c=t(63135),m=t(20435),o=t(9998),p=t(51339),g=t(26126);function d(D,E,l){E.length?E=e(E,function(y){return g(y)?function(h){return n(h,y.length===1?y[0]:y)}:y}):E=[p];var u=-1;E=e(E,m(a));var C=r(D,function(y,h,B){var S=e(E,function(L){return L(y)});return{criteria:S,index:++u,value:y}});return c(C,function(y,h){return o(y,h,l)})}P.exports=d},63135:P=>{function R(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}P.exports=R},17654:(P,R,t)=>{var e=t(85194);function n(a,r){if(a!==r){var c=a!==void 0,m=a===null,o=a===a,p=e(a),g=r!==void 0,d=r===null,D=r===r,E=e(r);if(!d&&!E&&!p&&a>r||p&&g&&D&&!d&&!E||m&&g&&D||!c&&D||!o)return 1;if(!m&&!p&&!E&&a<r||E&&c&&o&&!m&&!p||d&&c&&o||!g&&o||!D)return-1}return 0}P.exports=n},9998:(P,R,t)=>{var e=t(17654);function n(a,r,c){for(var m=-1,o=a.criteria,p=r.criteria,g=o.length,d=c.length;++m<g;){var D=e(o[m],p[m]);if(D){if(m>=d)return D;var E=c[m];return D*(E=="desc"?-1:1)}}return a.index-r.index}P.exports=n},52593:(P,R,t)=>{var e=t(47727);function n(a,r){return function(c,m){if(c==null)return c;if(!e(c))return a(c,m);for(var o=c.length,p=r?o:-1,g=Object(c);(r?p--:++p<o)&&m(g[p],p,g)!==!1;);return c}}P.exports=n},58422:(P,R,t)=>{var e=t(36393),n=t(90040),a=t(92403),r=t(26126);function c(m,o){var p=r(m)?e:a;return p(m,n(o,3))}P.exports=c},51006:(P,R,t)=>{var e=t(93367),n=t(16429),a=t(52431),r=t(65145),c=a(function(m,o){if(m==null)return[];var p=o.length;return p>1&&r(m,o[0],o[1])?o=[]:p>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),n(m,e(o,1),[])});P.exports=c},34049:(P,R,t)=>{var e=t(20454);function n(a){var r=a==null?0:a.length;return r?e(a,1,r):[]}P.exports=n},41942:(P,R,t)=>{var e=t(20454),n=t(69740);function a(r,c,m){return r&&r.length?(c=m||c===void 0?1:n(c),e(r,0,c<0?0:c)):[]}P.exports=a},87366:(P,R,t)=>{var e=t(19975),n=t(52431),a=t(99662),r=n(function(c,m){return a(c)?e(c,m):[]});P.exports=r},45322:(P,R,t)=>{"use strict";t.d(R,{U:()=>E,y:()=>d});var e=t(74081),n=t(45485),a=t(72450),r=t(39267),c=t(74513),m=t(32370),o=t(10701),p=t(93415);const g=({theme:l,expanded:u,variant:C,disabled:y,error:h})=>h?`1px solid ${l.colors.danger600} !important`:y?`1px solid ${l.colors.neutral150}`:u?`1px solid ${l.colors.primary600}`:C==="primary"?`1px solid ${l.colors.neutral0}`:`1px solid ${l.colors.neutral100}`,d=(0,a.default)(m.Z)``,D=(0,a.default)(p.x)`
  border: ${g};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:l})=>l.colors.primary600};

    ${d} {
      color: ${({theme:l,expanded:u})=>u?void 0:l.colors.primary700};
    }

    ${m.Z} {
      color: ${({theme:l,expanded:u})=>u?void 0:l.colors.primary600};
    }

    & > ${o.k} {
      background: ${({theme:l})=>l.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:l})=>l.colors.primary200};
    }
  }
`,E=({children:l,disabled:u=!1,error:C,expanded:y=!1,hasErrorMessage:h=!0,id:B,onToggle:S,toggle:L,size:k="M",variant:I="primary",shadow:F})=>{const U=(0,c.M)(B),J=n.useMemo(()=>({expanded:y,onToggle:S,toggle:L,id:U,size:k,variant:I,disabled:u}),[u,y,U,S,k,L,I]);return(0,e.jsxs)(r.S.Provider,{value:J,children:[(0,e.jsx)(D,{"data-strapi-expanded":y,disabled:u,"aria-disabled":u,expanded:y,hasRadius:!0,variant:I,error:C,shadow:F,children:l}),C&&h&&(0,e.jsx)(p.x,{paddingTop:1,children:(0,e.jsx)(m.Z,{variant:"pi",textColor:"danger600",children:C})})]})}},34642:(P,R,t)=>{"use strict";t.d(R,{v:()=>r});var e=t(74081),n=t(39267),a=t(93415);const r=({children:c,...m})=>{const{expanded:o,id:p}=(0,n.A)();if(!o)return null;const g=`accordion-content-${p}`,d=`accordion-label-${p}`,D=`accordion-desc-${p}`;return(0,e.jsx)(a.x,{role:"region",id:g,"aria-labelledby":d,"aria-describedby":D,...m,children:c})}},39267:(P,R,t)=>{"use strict";t.d(R,{A:()=>a,S:()=>n});var e=t(45485);const n=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),a=()=>(0,e.useContext)(n)},24920:(P,R,t)=>{"use strict";t.d(R,{B:()=>l});var e=t(74081),n=t(10411),a=t(72450),r=t(45322),c=t(39267);const m=({expanded:u,disabled:C,variant:y})=>{let h="neutral100";return u?h="primary100":C?h="neutral150":y==="primary"&&(h="neutral0"),h};var o=t(1782),p=t(50703),g=t(10701),d=t(32370);const D=(0,a.default)(o.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:u,expanded:C})=>C?u.colors.primary600:u.colors.neutral500};
    }
  }
`,E=(0,a.default)(g.k)`
  min-height: ${({theme:u,size:C})=>u.sizes.accordions[C]};
  border-radius: ${({theme:u,expanded:C})=>C?`${u.borderRadius} ${u.borderRadius} 0 0`:u.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:u})=>u.colors.primary600};
      }
    }
  }
`,l=({title:u,description:C,as:y="span",togglePosition:h="right",action:B,...S})=>{const{onToggle:L,toggle:k,expanded:I,id:F,size:U,variant:J,disabled:H}=(0,c.A)(),ce=`accordion-content-${F}`,ne=`accordion-label-${F}`,de=`accordion-desc-${F}`,Y=U==="M"?6:4,se=U==="M"?Y:Y-2,he=m({expanded:I,disabled:H,variant:J}),z={as:y,fontWeight:U==="S"?"bold":void 0,id:ne,textColor:I?"primary600":"neutral700",ellipsis:!0,variant:U==="M"?"delta":void 0},ue=I?"primary600":"neutral600",re=I?"primary200":"neutral200",q=U==="M"?`${32/16}rem`:`${24/16}rem`,_=()=>{H||(k&&!L?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),k()):L&&L())},ae=(0,e.jsx)(g.k,{justifyContent:"center",borderRadius:"50%",height:q,width:q,transform:I?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:re,cursor:H?"not-allowed":"pointer",onClick:_,shrink:0,children:(0,e.jsx)(p.J,{as:n.Z,width:U==="M"?`${11/16}rem`:`${8/16}rem`,color:I?"primary600":"neutral600"})});return(0,e.jsx)(E,{paddingBottom:se,paddingLeft:Y,paddingRight:Y,paddingTop:se,background:he,expanded:I,size:U,justifyContent:"space-between",cursor:H?"not-allowed":"",children:(0,e.jsxs)(g.k,{gap:3,flex:1,maxWidth:"100%",children:[h==="left"&&ae,(0,e.jsx)(D,{onClick:_,"aria-disabled":H,"aria-expanded":I,"aria-controls":ce,"aria-labelledby":ne,"data-strapi-accordion-toggle":!0,expanded:I,type:"button",flex:1,minWidth:0,...S,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.y,{...z,children:u}),C&&(0,e.jsx)(d.Z,{as:"p",id:de,textColor:ue,children:C})]})}),h==="right"&&(0,e.jsxs)(g.k,{gap:3,children:[ae,B]}),h==="left"&&B]})})}},37472:(P,R,t)=>{"use strict";t.d(R,{Z:()=>a});var e=t(74081),n=t(10701);const a=({startActions:r,endActions:c})=>!r&&!c?null:(0,e.jsxs)(n.k,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[(0,e.jsx)(n.k,{gap:2,wrap:"wrap",children:r}),(0,e.jsx)(n.k,{gap:2,shrink:0,wrap:"wrap",children:c})]})},74758:(P,R,t)=>{"use strict";t.d(R,{D:()=>a});var e=t(74081),n=t(93415);const a=({children:r})=>(0,e.jsx)(n.x,{paddingLeft:10,paddingRight:10,children:r})},27875:(P,R,t)=>{"use strict";t.d(R,{T:()=>d});var e=t(74081),n=t(45485),a=t(72450);const r=l=>{const u=(0,n.useRef)(null),[C,y]=(0,n.useState)(!0),h=([B])=>{y(B.isIntersecting)};return(0,n.useEffect)(()=>{const B=u.current,S=new IntersectionObserver(h,l);return B&&S.observe(u.current),()=>{B&&S.disconnect()}},[u,l]),[u,C]};var c=t(66705);const m=(l,u)=>{const C=(0,c.W)(u);(0,n.useLayoutEffect)(()=>{const y=new ResizeObserver(C);return Array.isArray(l)?l.forEach(h=>{h.current&&y.observe(h.current)}):l.current&&y.observe(l.current),()=>{y.disconnect()}},[l,C])};var o=t(93415),p=t(10701),g=t(32370);const d=l=>{const u=(0,n.useRef)(null),[C,y]=(0,n.useState)(null),[h,B]=r({root:null,rootMargin:"0px",threshold:0});return m(h,()=>{h.current&&y(h.current.getBoundingClientRect())}),(0,n.useEffect)(()=>{u.current&&y(u.current.getBoundingClientRect())},[u]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:C?.height},ref:h,children:B&&(0,e.jsx)(E,{ref:u,...l})}),!B&&(0,e.jsx)(E,{...l,sticky:!0,width:C?.width})]})};d.displayName="HeaderLayout";const D=(0,a.default)(o.x)`
  width: ${({width:l})=>l?`${l/16}rem`:void 0};
  z-index: ${({theme:l})=>l.zIndices[1]};
`,E=n.forwardRef(({navigationAction:l,primaryAction:u,secondaryAction:C,subtitle:y,title:h,sticky:B,width:S,...L},k)=>{const I=typeof y=="string";return B?(0,e.jsx)(D,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:S,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{children:[l&&(0,e.jsx)(o.x,{paddingRight:3,children:l}),(0,e.jsxs)(o.x,{children:[(0,e.jsx)(g.Z,{variant:"beta",as:"h1",...L,children:h}),I?(0,e.jsx)(g.Z,{variant:"pi",textColor:"neutral600",children:y}):y]}),C?(0,e.jsx)(o.x,{paddingLeft:4,children:C}):null]}),(0,e.jsx)(p.k,{children:u?(0,e.jsx)(o.x,{paddingLeft:2,children:u}):void 0})]})}):(0,e.jsxs)(o.x,{ref:k,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0,children:[l?(0,e.jsx)(o.x,{paddingBottom:2,children:l}):null,(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{minWidth:0,children:[(0,e.jsx)(g.Z,{as:"h1",variant:"alpha",...L,children:h}),C?(0,e.jsx)(o.x,{paddingLeft:4,children:C}):null]}),u]}),I?(0,e.jsx)(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:y}):y]})})},27997:(P,R,t)=>{"use strict";t.d(R,{A:()=>m});var e=t(74081),n=t(72450),a=t(93415);const r=(0,n.default)(a.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:o})=>o?"auto 1fr":"1fr"};
`,c=(0,n.default)(a.x)`
  overflow-x: hidden;
`,m=({sideNav:o,children:p})=>(0,e.jsxs)(r,{hasSideNav:Boolean(o),children:[o,(0,e.jsx)(c,{paddingBottom:10,children:p})]})},68412:(P,R,t)=>{"use strict";t.d(R,{r:()=>D});var e=t(74081),n=t(45485),a=t(48157),r=t(47533),c=t(72450),m=t(61657),o=t(32370),p=t(93415);const g=c.default.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:E})=>E?"none":void 0};
  color: ${({disabled:E,theme:l})=>E?l.colors.neutral600:l.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${o.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:E})=>E.colors.primary500};
  }

  &:active {
    color: ${({theme:E})=>E.colors.primary700};
  }

  ${m.BF};
`,d=(0,c.default)(p.x)`
  display: flex;
`,D=n.forwardRef(({children:E,href:l,to:u,disabled:C=!1,startIcon:y,endIcon:h,...B},S)=>{const L=l?"_blank":void 0,k=l?"noreferrer noopener":void 0;return(0,e.jsxs)(g,{as:u&&!C?r.NavLink:"a",target:L,rel:k,to:C?void 0:u,href:C?"#":l,disabled:C,ref:S,...B,children:[y&&(0,e.jsx)(d,{as:"span","aria-hidden":!0,paddingRight:2,children:y}),(0,e.jsx)(o.Z,{children:E}),h&&!l&&(0,e.jsx)(d,{as:"span","aria-hidden":!0,paddingLeft:2,children:h}),l&&(0,e.jsx)(d,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(a.Z,{})})]})})},9941:(P,R,t)=>{"use strict";t.d(R,{o:()=>c});var e=t(74081),n=t(72450),a=t(93415);const r=(0,n.default)(a.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,c=({labelledBy:m="main-content-title",...o})=>(0,e.jsx)(r,{"aria-labelledby":m,as:"main",id:"main-content",tabIndex:-1,...o})}}]);
