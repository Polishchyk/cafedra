"use strict";(self.webpackChunkcafedra=self.webpackChunkcafedra||[]).push([[5516],{63109:(F,C,a)=>{a.d(C,{Z:()=>b});var e=a(45485);const b=(D,N)=>{const[h,y]=(0,e.useState)(D);return(0,e.useEffect)(()=>{const p=setTimeout(()=>{y(D)},N);return()=>{clearTimeout(p)}},[D,N]),h}},91278:(F,C,a)=>{a.r(C),a.d(C,{MarketPlacePage:()=>me,default:()=>vt});var e=a(45485),R=a(27997),b=a(9941),D=a(74758),N=a(69878),h=a(10701),y=a(94098),p=a(93415),ve=a(31624),w=a(61908),g=a(17741),Ee=a(364),v=a(61020),Me=a(49402),ye=a(63109);const ke=()=>{const n=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[s,i]=(0,e.useState)(n),l=()=>i(!0),r=()=>i(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",l),window.addEventListener("offline",r),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}),[]),s};var be=a(36364),O=a(50703),Ce=a(12997),q=a(48157);const Re=()=>{const{formatMessage:n}=(0,v.Z)(),{trackUsage:s}=(0,g.rS)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>s("didMissMarketplacePlugin")},e.createElement(g.Y_,{title:n({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:n({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(Ce.Z,null),iconBackground:"alternative100",endAction:e.createElement(O.J,{as:q.Z,color:"neutral600",width:3,height:3,marginLeft:2})}))};var Se=a(35157),V=a(48102),Te=a(95066),xe=a(57121),De=a(70627),t=a.n(De),I=a(72450),Oe=a(8990),X=a(5627),_=a(78955);const ee=({message:n,value:s,onChange:i,possibleFilters:l,onClear:r,customizeContent:d})=>{const o=(c,m)=>`${c} (${m})`;return e.createElement(X.P,{"data-testid":`${n}-button`,label:n,placeholder:n,size:"M",onChange:i,onClear:r,value:s,customizeContent:d,multi:!0},Object.entries(l).map(([c,m])=>e.createElement(_.W,{"data-testid":`${c}-${m}`,key:c,value:c},o(c,m))))};ee.propTypes={message:t().string.isRequired,value:t().array.isRequired,onChange:t().func.isRequired,possibleFilters:t().object.isRequired,onClear:t().func.isRequired,customizeContent:t().func.isRequired};const te=ee,ae=({source:n,onToggle:s,query:i,npmPackageType:l,possibleCategories:r,possibleCollections:d,handleSelectChange:o,handleSelectClear:c})=>{const{formatMessage:m}=(0,v.Z)();return e.createElement(Oe.J2,{source:n,onDismiss:s,padding:3,spacing:4},e.createElement(Ie,{direction:"column",alignItems:"stretch",gap:1},e.createElement(te,{message:m({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:i?.collections||[],onChange:f=>{o({collections:f})},onClear:()=>c("collections"),possibleFilters:d,customizeContent:f=>m({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:f.length})}),l==="plugin"&&e.createElement(te,{message:m({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:i?.categories||[],onChange:f=>{o({categories:f})},onClear:()=>c("categories"),possibleFilters:r,customizeContent:f=>m({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:f.length}),name:"categories"})))};ae.propTypes={onToggle:t().func.isRequired,source:t().shape({current:t().instanceOf(Element)}).isRequired,query:t().object.isRequired,npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const Ne=ae,Ie=(0,I.default)(h.k)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,z=({name:n,handleRemove:s})=>e.createElement(p.x,{padding:1},e.createElement(Se.V,{icon:e.createElement(Te.Z,null),onClick:s},n)),Le=(0,I.default)(V.z)`
  height: ${({theme:n})=>n.sizes.input.S};
`,ne=({possibleCollections:n,possibleCategories:s,npmPackageType:i,query:l,handleSelectClear:r,handleSelectChange:d})=>{const[o,c]=(0,e.useState)(!1),m=(0,e.useRef)(),{formatMessage:f}=(0,v.Z)(),P=()=>c(u=>!u),E=(u,M)=>{const T={[M]:l[M].filter(L=>L!==u)};d(T)};return e.createElement(e.Fragment,null,e.createElement(p.x,{paddingTop:1,paddingBottom:1},e.createElement(Le,{variant:"tertiary",ref:m,startIcon:e.createElement(xe.Z,null),onClick:P,size:"S"},f({id:"app.utils.filters",defaultMessage:"Filters"})),o&&e.createElement(Ne,{onToggle:P,source:m,query:l,handleSelectClear:r,handleSelectChange:d,possibleCollections:n,possibleCategories:s,npmPackageType:i})),l.collections?.map(u=>e.createElement(z,{name:u,key:u,handleRemove:()=>E(u,"collections")})),i==="plugin"&&l.categories?.map(u=>e.createElement(z,{name:u,key:u,handleRemove:()=>E(u,"categories")})))};z.propTypes={name:t().string.isRequired,handleRemove:t().func.isRequired},ne.propTypes={npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,query:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const Ze=ne;var Be=a(77970),$e=a(23298),Ae=a(74577),S=a(32370),je=a(52448),Fe=a(87393);const we=(0,I.default)(p.x)`
  background: ${({theme:n})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${n.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Ve=()=>e.createElement(Fe.M,null,Array(12).fill(null).map((n,s)=>e.createElement(we,{key:`empty-plugin-card-${s}`,height:"234px",hasRadius:!0}))),se=({content:n})=>e.createElement(p.x,{position:"relative"},e.createElement(Ve,null),e.createElement(p.x,{position:"absolute",top:11,width:"100%"},e.createElement(h.k,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(O.J,{as:je.Z,color:"",width:"160px",height:"88px"}),e.createElement(p.x,{paddingTop:6},e.createElement(S.Z,{variant:"delta",as:"p",textColor:"neutral600"},n)))));se.propTypes={content:t().string.isRequired};const ze=se;var U=a(2981),re=a(37370),Ue=a(15398),Ge=a(6699),Qe=a.n(Ge),He=a(61473),We=a(59082),ie=a(78031),Je=a(96487),le=a.n(Je);const Z=({description:n,installMessage:s,disabled:i,handleCopy:l,pluginName:r})=>e.createElement(U.u,{"data-testid":`tooltip-${r}`,description:n},e.createElement(p.x,null,e.createElement(V.z,{size:"S",startIcon:e.createElement(ie.Z,null),variant:"secondary",disabled:i,onClick:l},s))),G=({strapiPeerDepVersion:n,strapiAppVersion:s,handleCopy:i,pluginName:l})=>{const{formatMessage:r}=(0,v.Z)(),d=le().validRange(n),o=le().satisfies(s,d),c=r({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});if(s){if(!d)return e.createElement(Z,{installMessage:c,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:s}),handleCopy:i});if(!o)return e.createElement(Z,{installMessage:c,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:s,versionRange:d}),disabled:!0})}return e.createElement(V.z,{size:"S",startIcon:e.createElement(ie.Z,null),variant:"secondary",onClick:i},c)};Z.defaultProps={disabled:!1,handleCopy:null},Z.propTypes={description:t().string.isRequired,installMessage:t().string.isRequired,disabled:t().bool,handleCopy:t().func,pluginName:t().string.isRequired},G.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},G.propTypes={strapiAppVersion:t().string,strapiPeerDepVersion:t().string,handleCopy:t().func.isRequired,pluginName:t().string.isRequired};const Ke=G,Q=({isInstalled:n,isInDevelopmentMode:s,commandToCopy:i,strapiAppVersion:l,strapiPeerDepVersion:r,pluginName:d})=>{const o=(0,g.lm)(),{formatMessage:c}=(0,v.Z)(),{trackUsage:m}=(0,g.rS)(),{copy:f}=(0,g.VP)(),P=async()=>{await f(i)&&(m("willInstallPlugin"),o({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}}))};return n?e.createElement(p.x,{paddingLeft:4},e.createElement(O.J,{as:We.Z,marginRight:2,width:12,height:12,color:"success600"}),e.createElement(S.Z,{variant:"omega",textColor:"success600",fontWeight:"bold"},c({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):s?e.createElement(Ke,{strapiAppVersion:l,strapiPeerDepVersion:r,handleCopy:P,pluginName:d}):null};Q.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},Q.propTypes={isInstalled:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,commandToCopy:t().string.isRequired,strapiAppVersion:t().string,strapiPeerDepVersion:t().string,pluginName:t().string.isRequired};const Ye=Q;var qe=a(84366),Xe=a(66770),_e=a(39142),et=a(33766);const tt=(0,I.default)(qe.i)`
  width: ${(0,g.Q1)(12)};
  transform: rotate(90deg);
`,H=({githubStars:n,npmDownloads:s,npmPackageType:i})=>{const{formatMessage:l}=(0,v.Z)();return e.createElement(h.k,{gap:1},!!n&&e.createElement(e.Fragment,null,e.createElement(O.J,{as:Xe.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),"aria-hidden":!0}),e.createElement(O.J,{as:_e.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),color:"warning500","aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:n,package:i})},e.createElement(S.Z,{variant:"pi",textColor:"neutral800"},n)),e.createElement(tt,{unsetMargin:!1,background:"neutral200"})),e.createElement(O.J,{as:et.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),"aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:s,package:i})},e.createElement(S.Z,{variant:"pi",textColor:"neutral800"},s)))};H.defaultProps={githubStars:0,npmDownloads:0},H.propTypes={githubStars:t().number,npmDownloads:t().number,npmPackageType:t().string.isRequired};const at=H,nt=(0,I.default)(S.Z)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,W=({npmPackage:n,isInstalled:s,useYarn:i,isInDevelopmentMode:l,npmPackageType:r,strapiAppVersion:d})=>{const{attributes:o}=n,{formatMessage:c}=(0,v.Z)(),{trackUsage:m}=(0,g.rS)(),f=i?`yarn add ${o.npmPackageName}`:`npm install ${o.npmPackageName}`,P=c({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),E=`https://market.strapi.io/${Qe().plural(r)}/${o.slug}`;return e.createElement(h.k,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(p.x,null,e.createElement(h.k,{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},e.createElement(p.x,{as:"img",src:o.logo.url,alt:`${o.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(at,{githubStars:o.githubStars,npmDownloads:o.npmDownloads,npmPackageType:r})),e.createElement(p.x,{paddingTop:4},e.createElement(S.Z,{as:"h3",variant:"delta"},e.createElement(h.k,{alignItems:"center"},o.name,o.validated&&!o.madeByStrapi&&e.createElement(U.u,{description:c({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(h.k,null,e.createElement(O.J,{as:Ue.Z,marginLeft:2,color:"success600"}))),o.madeByStrapi&&e.createElement(U.u,{description:P},e.createElement(h.k,null,e.createElement(p.x,{as:"img",src:He,alt:P,marginLeft:1,width:6,height:"auto"})))))),e.createElement(p.x,{paddingTop:2},e.createElement(nt,{as:"p",variant:"omega",textColor:"neutral600"},o.description))),e.createElement(h.k,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(re.Q,{size:"S",href:E,isExternal:!0,endIcon:e.createElement(q.Z,null),"aria-label":c({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:o.name}),variant:"tertiary",onClick:()=>m("didPluginLearnMore")},c({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})),e.createElement(Ye,{isInstalled:s,isInDevelopmentMode:l,commandToCopy:f,strapiAppVersion:d,strapiPeerDepVersion:o.strapiVersion,pluginName:o.name})))};W.defaultProps={isInDevelopmentMode:!1,strapiAppVersion:null},W.propTypes={npmPackage:t().shape({id:t().string.isRequired,attributes:t().shape({name:t().string.isRequired,description:t().string.isRequired,slug:t().string.isRequired,npmPackageName:t().string.isRequired,npmPackageUrl:t().string.isRequired,repositoryUrl:t().string.isRequired,logo:t().object.isRequired,developerName:t().string.isRequired,validated:t().bool.isRequired,madeByStrapi:t().bool.isRequired,strapiCompatibility:t().oneOf(["v3","v4"]),strapiVersion:t().string,githubStars:t().number,npmDownloads:t().number}).isRequired}).isRequired,isInstalled:t().bool.isRequired,useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool,npmPackageType:t().string.isRequired,strapiAppVersion:t().string};const st=W,J=({status:n,npmPackages:s,installedPackageNames:i,useYarn:l,isInDevelopmentMode:r,npmPackageType:d,strapiAppVersion:o,debouncedSearch:c})=>{const{formatMessage:m}=(0,v.Z)();if(n==="error")return e.createElement(h.k,{paddingTop:8},e.createElement(g.Hn,null));if(n==="loading")return e.createElement(h.k,{justifyContent:"center",paddingTop:8},e.createElement(Be.a,null,"Loading content..."));const f=m({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:c});return s.length===0?e.createElement(ze,{content:f}):e.createElement($e.r,{gap:4},s.map(P=>e.createElement(Ae.P,{col:4,s:6,xs:12,style:{height:"100%"},key:P.id},e.createElement(st,{npmPackage:P,isInstalled:i.includes(P.attributes.npmPackageName),useYarn:l,isInDevelopmentMode:r,npmPackageType:d,strapiAppVersion:o}))))};J.defaultProps={npmPackages:[],installedPackageNames:[],strapiAppVersion:null,debouncedSearch:""},J.propTypes={status:t().string.isRequired,npmPackages:t().array,installedPackageNames:t().arrayOf(t().string),useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,npmPackageType:t().string.isRequired,strapiAppVersion:t().string,debouncedSearch:t().string};const oe=J,ce=({pagination:n})=>e.createElement(p.x,{paddingTop:4},e.createElement(h.k,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(g.v4,{options:["12","24","50","100"],defaultValue:"24"}),e.createElement(g.tU,{pagination:n})));ce.propTypes={pagination:t().shape({page:t().number.isRequired,pageCount:t().number.isRequired,pageSize:t().number.isRequired,total:t().number.isRequired}).isRequired};const rt=ce,it=a.p+"9d5d788027e86620c234.svg";var lt=a(27875),ot=a(70521);const K=({isOnline:n,npmPackageType:s})=>{const{formatMessage:i}=(0,v.Z)(),{trackUsage:l}=(0,g.rS)(),r=s==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(lt.T,{title:i({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:i({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:n&&e.createElement(re.Q,{startIcon:e.createElement(ot.Z,null),variant:"tertiary",href:`https://market.strapi.io/submit-${s}`,onClick:()=>l(r),isExternal:!0},i({id:`admin.pages.MarketPlacePage.submit.${s}.link`,defaultMessage:`Submit ${s}`}))})},de=K;K.defaultProps={npmPackageType:"plugin"},K.propTypes={isOnline:t().bool.isRequired,npmPackageType:t().string};const ct=()=>{const{formatMessage:n}=(0,v.Z)();return e.createElement(R.A,null,e.createElement(b.o,null,e.createElement(de,{isOnline:!1}),e.createElement(h.k,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:(0,g.Q1)(120)},e.createElement(p.x,{paddingBottom:2},e.createElement(S.Z,{textColor:"neutral700",variant:"alpha"},n({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(p.x,{paddingBottom:6},e.createElement(S.Z,{textColor:"neutral700",variant:"epsilon"},n({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:it,alt:"offline",style:{width:"88px",height:"88px"}}))))},dt=(0,I.default)(p.x)`
  font-weight: ${({theme:n})=>n.fontWeights.semiBold};

  span {
    font-size: ${({theme:n})=>n.fontSizes[1]};
  }

  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,ge=({sortQuery:n,handleSelectChange:s})=>{const{formatMessage:i}=(0,v.Z)(),l={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}};return e.createElement(dt,null,e.createElement(X.P,{size:"S",id:"sort-by-select",value:n,customizeContent:()=>i(l[n].selected),onChange:r=>{s({sort:r})},label:i({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"})},Object.entries(l).map(([r,d])=>e.createElement(_.W,{key:r,value:r},i(d.option)))))};ge.propTypes={sortQuery:t().string.isRequired,handleSelectChange:t().func.isRequired};const gt=ge;var ut=a(51926),pt=a(29206),B=a.n(pt),ue=a(40464);const pe="https://market-api.strapi.io",mt=(n,s={})=>{const i=(0,g.lm)();return(0,ue.useQuery)(["marketplace","plugins",s],async()=>{try{const l=B().stringify(B().parse(s)),r=await fetch(`${pe}/plugins?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace plugins.");return await r.json()}catch{}return null},{onSuccess(){n&&n()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})},ft=(n,s={})=>{const i=(0,g.lm)();return(0,ue.useQuery)(["marketplace","providers",s],async()=>{try{const l=B().stringify(B().parse(s)),r=await fetch(`${pe}/providers?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace providers.");return await r.json()}catch{}return null},{onSuccess(){n&&n()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};function Pt({npmPackageType:n,debouncedSearch:s,query:i,tabQuery:l}){const{notifyStatus:r}=(0,ut.G)(),{formatMessage:d}=(0,v.Z)(),o=d({id:"global.marketplace",defaultMessage:"Marketplace"}),c=()=>{r(d({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:o}))},m={page:i?.page||1,pageSize:i?.pageSize||24},{data:f,status:P}=mt(c,{...l.plugin,pagination:m,search:s}),{data:E,status:u}=ft(c,{...l.provider,pagination:m,search:s}),M=n==="plugin"?f:E,T=n==="plugin"?P:u,[L,$]=(0,e.useState)({}),[A,j]=(0,e.useState)({});(0,e.useEffect)(()=>{T==="success"&&$(M.meta.collections),P==="success"&&j(f.meta.categories)},[f?.meta.categories,P,M?.meta.collections,T]);const{pagination:Y}=T==="success"?M.meta:{};return{pluginsResponse:f,providersResponse:E,pluginsStatus:P,providersStatus:u,possibleCollections:L,possibleCategories:A,pagination:Y}}const ht=Pt,me=()=>{const{formatMessage:n}=(0,v.Z)(),{trackUsage:s}=(0,g.rS)(),i=(0,e.useRef)(s),l=(0,g.lm)(),[{query:r},d]=(0,g.Kx)(),o=(0,ye.Z)(r?.search,500)||"",{autoReload:c,dependencies:m,useYarn:f,strapiVersion:P}=(0,g.L7)(),E=ke(),u=r?.npmPackageType||"plugin",[M,T]=(0,e.useState)({plugin:u==="plugin"?{...r}:{},provider:u==="provider"?{...r}:{}});(0,g.go)(),(0,e.useEffect)(()=>{i.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{c||l({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"}})},[l,c]);const{pluginsResponse:L,providersResponse:$,pluginsStatus:A,providersStatus:j,possibleCollections:Y,possibleCategories:Et,pagination:fe}=ht({npmPackageType:u,debouncedSearch:o,query:r,tabQuery:M});if(!E)return e.createElement(ct,null);const Mt=x=>{const k=x===0?"plugin":"provider",kt=M[k]&&Object.keys(M[k]).length;d(kt?{...M[k],search:r?.search||"",npmPackageType:k,page:1}:{npmPackageType:k,collections:[],categories:[],sort:"name:asc",page:1,search:r?.search||""})},Pe=x=>{d({...x,page:1}),T(k=>({...k,[u]:{...k[u],...x}}))},yt=x=>{d({[x]:[],page:null},"remove"),T(k=>({...k,[u]:{}}))},he=Object.keys(m);return e.createElement(R.A,null,e.createElement(b.o,null,e.createElement(Ee.q,{title:n({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(de,{isOnline:E,npmPackageType:u}),e.createElement(D.D,null,e.createElement(N.v,{label:n({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",initialSelectedTabIndex:["plugin","provider"].indexOf(u),onTabChange:Mt},e.createElement(h.k,{justifyContent:"space-between",paddingBottom:4},e.createElement(y.m,null,e.createElement(y.O,null,n({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",A==="success"?`(${L.meta.pagination.total})`:"..."),e.createElement(y.O,null,n({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",j==="success"?`(${$.meta.pagination.total})`:"...")),e.createElement(p.x,{width:"25%"},e.createElement(ve.w,{name:"searchbar",onClear:()=>d({search:"",page:1}),value:r?.search,onChange:x=>d({search:x.target.value,page:1}),clearLabel:n({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})))),e.createElement(h.k,{paddingBottom:4,gap:2},e.createElement(gt,{sortQuery:r?.sort||"name:asc",handleSelectChange:Pe}),e.createElement(Ze,{npmPackageType:u,possibleCollections:Y,possibleCategories:Et,query:r||{},handleSelectChange:Pe,handleSelectClear:yt})),e.createElement(w.n,null,e.createElement(w.x,null,e.createElement(oe,{npmPackages:L?.data,status:A,installedPackageNames:he,useYarn:f,isInDevelopmentMode:c,npmPackageType:"plugin",strapiAppVersion:P,debouncedSearch:o})),e.createElement(w.x,null,e.createElement(oe,{npmPackages:$?.data,status:j,installedPackageNames:he,useYarn:f,isInDevelopmentMode:c,npmPackageType:"provider",debouncedSearch:o})))),fe&&e.createElement(rt,{pagination:fe}),e.createElement(p.x,{paddingTop:8},e.createElement(Re,null)))))},vt=()=>{const n=(0,Me.v9)(be._);return e.createElement(g.O4,{permissions:n.marketplace.main},e.createElement(me,null))}},87393:(F,C,a)=>{a.d(C,{M:()=>R});var e=a(72450);const R=e.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  grid-gap: ${({theme:b})=>b.spaces[4]};
`},27997:(F,C,a)=>{a.d(C,{A:()=>h});var e=a(74081),R=a(72450),b=a(93415);const D=(0,R.default)(b.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:y})=>y?"auto 1fr":"1fr"};
`,N=(0,R.default)(b.x)`
  overflow-x: hidden;
`,h=({sideNav:y,children:p})=>(0,e.jsxs)(D,{hasSideNav:Boolean(y),children:[y,(0,e.jsx)(N,{paddingBottom:10,children:p})]})}}]);
